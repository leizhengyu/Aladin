import urllibimport urllib3,certifiimport jsonimport reimport lxml.etreeimport lxml.htmldef get_seller(url):    rsp=pool.request("GET",url,headers=headers)    doc=lxml.html.document_fromstring(rsp.data)    url=doc.xpath('//li[@data-page-name="contactinfo"]/a')[0].attrib['href']    rsp=pool.request("GET",url,headers=headers)    doc=lxml.html.document_fromstring(rsp.data)    contactname=doc.xpath('//div[@class="contact-info"]/dl/dd/a')[0].text    contactdesc=doc.xpath('//div[@class="contcat-desc"]/dl/dd')    website=doc.xpath('//div[@class="contcat-desc"]/dl/dd/div/a')    wbs=[]    for wb in website:        wbs.append(wb.text)            data = {"name":contactname,            "tel" :contactdesc[0].text.strip(),            "mobile":contactdesc[1].text.strip(),            "fax":contactdesc[2].text.strip(),            "addr":contactdesc[3].text.strip(),            "zipcode":contactdesc[4].text.strip(),            "website":wbs            }    return data# 1. start and connect to serverjs=json.loads('{"KEYS":"净化器",         \                "BASE":{"http": "http://s.1688.com","Headers":"content=IE9","path":"/selloffer/offer_search.htm?keywords="}, \                "PATH":[{"xpath":"<a><b><c><d>","action":"open/parse"},    \                        {"xpath":"asdf","action":"parse"},                 \                        {"xpath":"asdf","action":"parse"}]}')# 2. create thead and send message keywords = js['KEYS']baseaddr = js['BASE']xpaths   = js['PATH']pool = urllib3.PoolManager(cert_reqs='CERT_REQUIRED', ca_certs=certifi.where())rsp = pool.request("GET",baseaddr['http']);ct=rsp.headers['Content-Type']regex = re.compile(r'.*; charset=(\w+)')match=regex.match(ct)if match :    charset=match.group(1)else:    charset='utf-8'headers = {'User-Agent':'Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET4.0C; .NET4.0E)','Accept':'text/html;q=0.9,*/*;q=0.8','Accept-Charset':'ISO-8859-1,utf-8;q=0.7,*;q=0.3','Accept-Encoding':'GBK,utf-8;q=0.7,*;q=0.3','Connection':'close','Referer':'http://s.1688.com'}url = baseaddr['http'] + baseaddr['path'] +  urllib.parse.quote(keywords.encode(charset))rsp = pool.request("GET",url,headers=headers)doc = lxml.html.document_fromstring(rsp.data)alist=doc.xpath('//a[@class="sm-offer-photoLink sw-dpl-offer-photoLink"]')for a in alist:    url=a.attrib['href']    print(url)    data=get_seller(url)    print(data)