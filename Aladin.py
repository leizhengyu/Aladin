# -*- coding:gbk -*-import urllibimport urllib3import json# 1. start and connect to serverjs=json.loads('{"KEYS":"¾»»¯Æ÷",         \                "BASE":{"http": "s.1688.com","Headers":"content=IE9","path":"/selloffer/offer_search.htm?keywords="}, \                "PATH":[{"xpath":"<a><b><c><d>","action":"open/parse"},    \                        {"xpath":"asdf","action":"parse"},                 \                        {"xpath":"asdf","action":"parse"}]}')# 2. create thead and send message keywords = js['KEYS']baseaddr = js['BASE']xpaths   = js['PATH']pool = urllib3.HTTPConnectionPool(baseaddr['http'])print(baseaddr['path'] +  urllib.parse.quote(keywords.encode("gbk")))response = pool.request("GET",baseaddr['path'] +  urllib.parse.quote(keywords.encode("gbk")))#response = pool.request("GET",'/selloffer/offer_search.htm?keywords=%BE%BB%CB%AE%C6%F7')#print(response.data)print("asdfasdf")#class Spider:#   #def __init__(self):#       #self.siteURL = 'http://www.1688.com/'###   #def OpenUrl(self,url):###       ###a=xcrawler.PageScraper()#       ###GET /selloffer/offer_search.htm?keywords=%CE%DE%C8%CB%BB%FA&n=y&spm=a260k.635.1998096057.d1 HTTP/1.1       ##http://s.1688.com/selloffer/offer_search.htm?keywords=%BE%BB%BB%AF%C6%F7       ##http://s.1688.com/selloffer/offer_search.html?keywords=%25BE%25BB%25BB%25AF%25C6%25F7##       #params = urllib.parse.quote(('¾»»¯Æ÷').encode("gbk"))       #url = 'http://s.1688.com/selloffer/offer_search.htm?keywords=%s'%params                 ##http://s.1688.com/selloffer/offer_search.htm?keywords=%BE%BB%BB%AF%C6%F7&button_click=top&earseDirect=false&n=y       #print(url)#url = "http://dj.1688.com/ci_king?a=876003614&e=lTHN.WNiyK220n5Wtu0Gzxt879WbI6EIdP-7x-ZjXcfoMl01WGK.VLD8.Q-J1Q4ZrwKFppaZt4CV-jQ.X.UWd.Qql-0XvYPgy1k7IEiokBmoAILuZLL342nmdC-6S1l8h1xzHY7dl.iQ54PsOjjXs3WzvQNJY7NjW9p1gsoPDW6D6WUiRsf1qM0ApxsFPwiIls6U0QTILmxAFLEVVsR8BG6vDb0CDS8UcHqgIBR9vBe2YfWHZsr4T-5PfuwYc.TzXmEx9ejxRKxCe1MJsZ9PhfFnY3Pb0NEwriXOoKcoMKSVgaAqnaRNF-k7E9XAEB.9yfFkLIE.Jk8_&v=3"#url = "http://detail.1688.com/offer/44300264955.html?tracelog=p4p"#print(url)headers = {'Referer':'http://detail.1688.com/offer/', 'User-Agent':'Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET4.0C; .NET4.0E)', 'Accept':'application/xaml+xml'}http = urllib3.PoolManager()r = http.request('GET',url,redirect=True,headers=headers)#              ##response = urllib3.urlopen(request)#print(r.data.decode('gbk'))###   #def SetParams(self,pageIndex):#       #page = self.OpenUrl('')#       #print(page)#####   #def GetPage(self):#       #pass#   #def Parse(self,xpath):#       #pass#   #def GetInfo(self):#       #pass#spider = Spider()#spider.SetParams('')